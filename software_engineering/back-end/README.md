# Back-end

Σε αυτόν τον φάκελο βρίσκεται η υλοποίηση του **back-end** του συστήματός μας. Η υλοποίηση του back-end βασίστηκε στο microframework `flask`, και ειδικά στο extension `flask_restful` της Python 3. Συνεπώς, δεν υπάρχει η ανάγκη/δυνατότητα κάποιας εγκατάστασης, παρά μόνο του deployment του back-end και του RESTful API.

## Οδηγίες για το deployment του συστήματος
1. Εντός του φακέλου `back-end` εκτελούμε τo bash script `deploy.sh`:
```
./deploy.sh
```
Η εντολή αυτή θα δημιουργήσει ένα Python 3 virtual environment (εάν αυτό δεν υπάρχει), θα το ενεργοποιήσει, θα εγκαταστήσει σε αυτό όλα τα dependencies του back-end, θα δημιουργήσει το απαιτούμενο self-signed certificate και, τέλος, θα "σηκώσει" το API του συστήματος.

Μετά από αυτό, το API του συστήματος είναι διαθέσιμο στο κάτωθι URL, κατά τις προδιαγραφές που δόθηκαν:
```
https://localhost:8765/energy/api
```

## Οδηγίες για το testing
Για τον έλεγχο του back-end χρησιμοποιήθηκε το `pytest`.

Για την εκτέλεση όλων των tests του back-end/API, εντός του φακέλου `cli-client` τρέχουμε το bash script `run_tests.sh`:
```
./run_tests.sh
```
Το script αυτό θα δημιουργήσει ένα Python 3 virtual environment εάν αυτό δεν υπάρχει, θα εγκαταστήσει σε αυτό το back-end μαζί με τα dependencies του, καθώς και το `pytest`, θα αντιγράψει την βάση δεδομένων σε μία εικονική βάση για το testing και, στη συνέχεια, χρησιμοποιώντας το `pytest`, θα εκτελέσει τα tests που βρίσκονται στον φάκελο `tests`, τυπώνοντας ένα report των αποτελεσμάτων. Τέλος, διαγράφει την testing βάση.

Λόγω του overhead που προκύπτει από την δημιουργία της testing βάσης, το script χρειάζεται περίπου 1 λεπτό για να ολοκληρωθεί.
